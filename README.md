# ğŸ° Kiwoom Lottery

Chainlink VRFë¥¼ í™œìš©í•œ íƒˆì¤‘ì•™í™” ë¡œë˜ ì‹œìŠ¤í…œ

[![Solidity](https://img.shields.io/badge/Solidity-0.8.24-blue)](https://soliditylang.org/)
[![Foundry](https://img.shields.io/badge/Built%20with-Foundry-red)](https://getfoundry.sh/)
[![Chainlink](https://img.shields.io/badge/Powered%20by-Chainlink%20VRF-blue)](https://chain.link/)

---

## ğŸ¯ í”„ë¡œì íŠ¸ ì†Œê°œ

Kiwoom LotteryëŠ” ë¸”ë¡ì²´ì¸ ê¸°ë°˜ì˜ íˆ¬ëª…í•˜ê³  ê³µì •í•œ ë¡œë˜ ì‹œìŠ¤í…œì…ë‹ˆë‹¤.

### âœ¨ ì£¼ìš” íŠ¹ì§•

- ğŸ« **ERC721 NFT í‹°ì¼“**: ê° í‹°ì¼“ì€ ê³ ìœ í•œ NFT
- ğŸ² **Chainlink VRF**: ê²€ì¦ ê°€ëŠ¥í•œ ë‚œìˆ˜ë¡œ ë‹¹ì²¨ ë²ˆí˜¸ ìƒì„±
- ğŸ’° **ìë™ ë¶„ë°°**: ìŠ¤ë§ˆíŠ¸ ì»¨íŠ¸ë™íŠ¸ê°€ ë‹¹ì²¨ê¸ˆ ìë™ ë¶„ë°°
- ğŸ” **ì™„ì „ íˆ¬ëª…**: ëª¨ë“  ê±°ë˜ê°€ ë¸”ë¡ì²´ì¸ì— ê¸°ë¡
- ğŸŒ **íƒˆì¤‘ì•™í™”**: ì¤‘ì•™ ê¸°ê´€ ì—†ì´ ì‘ë™

---

## ğŸ“Š í˜„ì¬ ìƒíƒœ

âœ… **ìŠ¤ë§ˆíŠ¸ ì»¨íŠ¸ë™íŠ¸ ì™„ì„±** (90%)  
âœ… **ë¡œì»¬ í…ŒìŠ¤íŠ¸ ì™„ë£Œ** (100%)  
âœ… **í…ŒìŠ¤íŠ¸ë„· ë°°í¬ ì™„ë£Œ** (Kaia Kairos)  
âœ… **í”„ë¡ íŠ¸ì—”ë“œ ê°œë°œ ì¤‘** (40%)
  - âœ… í‹°ì¼“ êµ¬ë§¤ UI
  - âœ… ë‚´ í‹°ì¼“ ì¡°íšŒ
  - âœ… ìƒê¸ˆ ë¶„ë°° ë‚´ì—­
  - âœ… MockVRF RequestId ìë™ ì¡°íšŒ
  - âœ… íŠ¸ëœì­ì…˜ ìƒíƒœ ëª¨ë‹¬
  - âœ… ëª¨ë°”ì¼ ë°˜ì‘í˜• UI
  - âœ… ì—ëŸ¬ ì²˜ë¦¬ ê°œì„ 

**ë°°í¬ëœ ì»¨íŠ¸ë™íŠ¸** (2025-10-21 ìµœì¢…): 
- **Lotto**: [0x2e7bb733b7813628a46130fa48b9f9cdda29e088](https://baobab.klaytnscope.com/account/0x2e7bb733b7813628a46130fa48b9f9cdda29e088) - **í…ŒìŠ¤íŠ¸ í•¨ìˆ˜ í¬í•¨**
- **MockVRF**: [0xbb1ced5b060cc67af8c393844b1d3054afb90273](https://baobab.klaytnscope.com/account/0xbb1ced5b060cc67af8c393844b1d3054afb90273)
- **ë„¤íŠ¸ì›Œí¬**: Kaia Kairos Testnet (Chain ID: 1001)

### ğŸ’° ë‹¹ì²¨ê¸ˆ ë¶„ë°° ê·œì¹™
- **1ë“±**: 70% (ë‹¨ë… ë‹¹ì²¨ ì‹œ 100%)
- **2ë“±**: 10% (ë¯¸ë‹¹ì²¨ ì‹œ 3ë“±ìœ¼ë¡œ ì´ì „)
- **3ë“±**: 20%
- **ì´ì›” ì­íŒŸ**: 1ë“± ë¯¸ë‹¹ì²¨ ì‹œ ë‹¤ìŒ íšŒì°¨ë¡œ ì´ì›”

### ğŸ§ª í…ŒìŠ¤íŠ¸ ê¸°ëŠ¥
- **`setWinningNumbersForTest()`**: ê´€ë¦¬ìê°€ í…ŒìŠ¤íŠ¸ìš© ë‹¹ì²¨ë²ˆí˜¸ ì§ì ‘ ì„¤ì • ê°€ëŠ¥ (ì‹¤ì œ ë°°í¬ ì „ ì‚­ì œ ì˜ˆì •)

---

## ğŸ› ï¸ ê¸°ìˆ  ìŠ¤íƒ

### Smart Contracts
- **Solidity** 0.8.24
- **Foundry** - ê°œë°œ í”„ë ˆì„ì›Œí¬
- **OpenZeppelin** - ERC721 êµ¬í˜„
- **Chainlink VRF V2** - ë‚œìˆ˜ ìƒì„±

### Frontend (ì˜ˆì •)
- **Next.js** 15
- **React** 19
- **ethers.js** 6
- **TailwindCSS** 4

---

## ğŸš€ ì‹œì‘í•˜ê¸°

### í•„ìˆ˜ ìš”êµ¬ì‚¬í•­

- [Foundry](https://getfoundry.sh/)
- [Node.js](https://nodejs.org/) 18+
- [Git](https://git-scm.com/)

### ì„¤ì¹˜

```bash
# ì €ì¥ì†Œ í´ë¡ 
git clone https://github.com/yourusername/kiwoom-lottery.git
cd kiwoom-lottery

# Foundry ì˜ì¡´ì„± ì„¤ì¹˜
cd contracts
forge install

# Frontend ì˜ì¡´ì„± ì„¤ì¹˜
cd ../frontend
npm install
```

---

## ğŸ§ª ë¡œì»¬ í…ŒìŠ¤íŠ¸

### 1. Anvil ì‹¤í–‰ (ë¡œì»¬ ë¸”ë¡ì²´ì¸)

```bash
anvil
```

### 2. í†µí•© í…ŒìŠ¤íŠ¸ ì‹¤í–‰

```bash
cd contracts

forge script script/TestLottoComplete.s.sol:TestLottoComplete \
  --rpc-url http://localhost:8545 \
  --private-key 0xac0974bec39a17e36ba4a6b4d238ff944bacb478cbed5efcae784d7bf4f2ff80 \
  --broadcast \
  -vvvv
```

ì´ ëª…ë ¹ì–´ëŠ” ë‹¤ìŒì„ ìˆ˜í–‰í•©ë‹ˆë‹¤:
- âœ… ì»¨íŠ¸ë™íŠ¸ ë°°í¬ (Mock VRF í¬í•¨)
- âœ… íšŒì°¨ ìƒì„±
- âœ… í‹°ì¼“ 2ì¥ êµ¬ë§¤
- âœ… VRF ë‚œìˆ˜ ìƒì„±
- âœ… ë‹¹ì²¨ ë²ˆí˜¸ í™•ì¸
- âœ… ë‹¹ì²¨ê¸ˆ ë¶„ë°°

---

## ğŸ“¦ í…ŒìŠ¤íŠ¸ë„· ë°°í¬

### 1. í™˜ê²½ ë³€ìˆ˜ ì„¤ì •

```bash
cd contracts
cp .env.example .env
# .env íŒŒì¼ì„ í¸ì§‘í•˜ì—¬ ê°’ ì…ë ¥
```

í•„ìš”í•œ í™˜ê²½ ë³€ìˆ˜:
```bash
VRF_COORDINATOR_V2=0x9DdfaCa8183c41ad55329BdeeD9F6A8d53168B1B
VRF_SUBSCRIPTION_ID=your_subscription_id
VRF_KEY_HASH=0x787d74caea10b2b357790d5b5247c2f63d1d91572a9846f780606e4d953677ae
PRIVATE_KEY=0xyour_private_key
ETHERSCAN_API_KEY=your_api_key
```

### 2. ë°°í¬ ì‹¤í–‰

```bash
forge script script/DeployLotto.s.sol:DeployLotto \
  --rpc-url https://sepolia-rpc.scroll.io \
  --broadcast \
  --verify \
  -vvvv
```

### 3. VRF Subscription ì„¤ì •

1. https://vrf.chain.link/scroll-sepolia ì ‘ì†
2. ë°°í¬ëœ ì»¨íŠ¸ë™íŠ¸ ì£¼ì†Œë¥¼ Consumerë¡œ ì¶”ê°€
3. LINK í† í° ì¶©ì „

---

## ğŸ“– ì‚¬ìš© ë°©ë²•

### íšŒì°¨ ìƒì„±

```bash
forge script script/CreateDraw.s.sol:CreateDraw \
  --rpc-url https://sepolia-rpc.scroll.io \
  --broadcast \
  -vvvv
```

### í‹°ì¼“ êµ¬ë§¤

```bash
forge script script/BuyTicket.s.sol:BuyTicket \
  --rpc-url https://sepolia-rpc.scroll.io \
  --broadcast \
  -vvvv
```

---

## ğŸ”§ ìŠ¤ë§ˆíŠ¸ ì»¨íŠ¸ë™íŠ¸ API

### ì£¼ìš” í•¨ìˆ˜

#### `buyTicket(uint8[6] memory _numbers, string memory _tokenURI)`
í‹°ì¼“ êµ¬ë§¤ (0.01 ETH)

**Parameters:**
- `_numbers`: 1-45 ë²”ìœ„ì˜ 6ê°œ ë²ˆí˜¸ ë°°ì—´
- `_tokenURI`: ë©”íƒ€ë°ì´í„° URI

**Example:**
```solidity
uint8[6] memory numbers = [7, 12, 23, 31, 38, 42];
lotto.buyTicket{value: 0.01 ether}(numbers, "ipfs://...");
```

#### `requestRandomWinningNumbers(uint256 _drawId)`
VRFë¡œ ë‹¹ì²¨ ë²ˆí˜¸ ìƒì„± ìš”ì²­ (Owner only)

**Parameters:**
- `_drawId`: ì¶”ì²¨í•  íšŒì°¨ ë²ˆí˜¸

#### `winningNumbers(uint256 _drawId, uint256 _index)`
íšŒì°¨ë³„ ë‹¹ì²¨ ë²ˆí˜¸ ì¡°íšŒ

**Returns:**
- í•´ë‹¹ ì¸ë±ìŠ¤ì˜ ë‹¹ì²¨ ë²ˆí˜¸ (uint8)

---

## ğŸ“ í”„ë¡œì íŠ¸ êµ¬ì¡°

```
kiwoom-lottery/
â”œâ”€â”€ contracts/
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ Lotto.sol                    # ë©”ì¸ ì»¨íŠ¸ë™íŠ¸
â”‚   â”‚   â””â”€â”€ mocks/
â”‚   â”‚       â””â”€â”€ MockVRFCoordinatorV2.sol
â”‚   â”œâ”€â”€ script/
â”‚   â”‚   â”œâ”€â”€ DeployLotto.s.sol            # ë°°í¬
â”‚   â”‚   â”œâ”€â”€ TestLottoComplete.s.sol      # í†µí•© í…ŒìŠ¤íŠ¸
â”‚   â”‚   â”œâ”€â”€ CreateDraw.s.sol             # íšŒì°¨ ìƒì„±
â”‚   â”‚   â””â”€â”€ BuyTicket.s.sol              # í‹°ì¼“ êµ¬ë§¤
â”‚   â””â”€â”€ test/
â”‚       â””â”€â”€ Lotto.t.sol                  # í…ŒìŠ¤íŠ¸
â”œâ”€â”€ frontend/
â”‚   â”œâ”€â”€ src/app/
â”‚   â”‚   â””â”€â”€ page.tsx                     # ë©”ì¸ í˜ì´ì§€
â”‚   â””â”€â”€ lib/
â”‚       â””â”€â”€ lottoAbi.json                # ì»¨íŠ¸ë™íŠ¸ ABI
â””â”€â”€ README.md
```

---

## ğŸ§© ë¡œë˜ ì‹œìŠ¤í…œ ì„¤ëª…

### í‹°ì¼“ êµ¬ë§¤
1. 1-45 ë²”ìœ„ì—ì„œ 6ê°œì˜ ë²ˆí˜¸ ì„ íƒ
2. 0.01 ETH ì§€ë¶ˆ
3. ERC721 NFTë¡œ í‹°ì¼“ ë°œí–‰
4. ìƒê¸ˆ í’€ì— ìë™ ì ë¦½

### ë‹¹ì²¨ ë²ˆí˜¸ ìƒì„±
1. Ownerê°€ VRF ë‚œìˆ˜ ìš”ì²­
2. Chainlink VRFê°€ ë‚œìˆ˜ ìƒì„±
3. í”¼ì…”-ì˜ˆì´ì¸  ì…”í”Œë¡œ 6ê°œ ë²ˆí˜¸ ì¶”ì¶œ
4. ìë™ìœ¼ë¡œ ë‹¹ì²¨ê¸ˆ ë¶„ë°° ì‹¤í–‰

### ë‹¹ì²¨ê¸ˆ ë¶„ë°°
1. êµ¬ë§¤í•œ ë²ˆí˜¸ì™€ ë‹¹ì²¨ ë²ˆí˜¸ ë¹„êµ
2. 6ê°œ ëª¨ë‘ ì¼ì¹˜ ì‹œ ë‹¹ì²¨
3. ë‹¹ì²¨ìë“¤ì—ê²Œ ìƒê¸ˆ ê· ë“± ë¶„ë°°
4. ë‹¹ì²¨ì ì—†ìœ¼ë©´ ë‹¤ìŒ íšŒì°¨ë¡œ ì´ì›”

---

## ğŸ” ë³´ì•ˆ

- âœ… Ownable íŒ¨í„´ìœ¼ë¡œ ê¶Œí•œ ê´€ë¦¬
- âœ… Chainlink VRFë¡œ ì•ˆì „í•œ ë‚œìˆ˜
- âœ… ì¬ì§„ì… ê³µê²© ë°©ì–´
- âœ… ì…ë ¥ ê°’ ìœ íš¨ì„± ê²€ì¦
- âš ï¸ withdraw() í•¨ìˆ˜ ê°œì„  í•„ìš”

---

## ğŸ—ºï¸ ë¡œë“œë§µ

### Phase 1 (ì™„ë£Œ) âœ…
- [x] ìŠ¤ë§ˆíŠ¸ ì»¨íŠ¸ë™íŠ¸ ê°œë°œ
- [x] Chainlink VRF í†µí•©
- [x] ë¡œì»¬ í…ŒìŠ¤íŠ¸
- [x] í…ŒìŠ¤íŠ¸ë„· ë°°í¬

### Phase 2 (ì§„í–‰ ì¤‘) ğŸš§
- [x] í”„ë¡ íŠ¸ì—”ë“œ ê¸°ë³¸ êµ¬ì¡°
- [x] ì§€ê°‘ ì—°ê²° ê¸°ëŠ¥
- [x] í‹°ì¼“ êµ¬ë§¤ UI
- [x] ë‹¹ì²¨ í™•ì¸ UI
- [x] ë‚´ í‹°ì¼“ ì¡°íšŒ
- [x] ìƒê¸ˆ ë¶„ë°° ë‚´ì—­
- [x] MockVRF RequestId ìë™ ì¡°íšŒ
- [x] íŠ¸ëœì­ì…˜ ìƒíƒœ ëª¨ë‹¬
- [x] ëª¨ë°”ì¼ ë°˜ì‘í˜•
- [ ] ì‹¤ì œ VRF ì—°ë™ (Orakl VRF)

### Phase 3 (ì˜ˆì •) ğŸ“‹
- [ ] ë‹¹ì²¨ ë“±ê¸‰ ì‹œìŠ¤í…œ (5ê°œ, 4ê°œ, 3ê°œ ì¼ì¹˜)
- [ ] Chainlink Automation (ìë™ ì¶”ì²¨)
- [ ] í†µê³„ ëŒ€ì‹œë³´ë“œ
- [ ] ë©”ì¸ë„· ë°°í¬

---

## ğŸ¤ ê¸°ì—¬í•˜ê¸°

ê¸°ì—¬ëŠ” ì–¸ì œë‚˜ í™˜ì˜í•©ë‹ˆë‹¤!

1. Fork the Project
2. Create your Feature Branch (`git checkout -b feature/AmazingFeature`)
3. Commit your Changes (`git commit -m 'Add some AmazingFeature'`)
4. Push to the Branch (`git push origin feature/AmazingFeature`)
5. Open a Pull Request

---

## ğŸ“„ ë¼ì´ì„ ìŠ¤

MIT License

---

## ğŸ”— ë§í¬

- **ë°°í¬ëœ ì»¨íŠ¸ë™íŠ¸**: [Scroll Sepolia Explorer](https://sepolia.scrollscan.com/address/0x1fd02347ed80ef3e182d24dc16c59398e4525140)
- **Chainlink VRF**: [VRF Dashboard](https://vrf.chain.link/scroll-sepolia)
- **ë¬¸ì„œ**: [PROJECT_STATUS.md](./PROJECT_STATUS.md)

---

## ğŸ‘¥ íŒ€

- **ê°œë°œì**: [Your Name]
- **ì»¨íŠ¸ë™íŠ¸**: Lotto.sol
- **ë„¤íŠ¸ì›Œí¬**: Scroll Sepolia

---

## ğŸ“ ë¬¸ì˜

ì§ˆë¬¸ì´ë‚˜ ì œì•ˆì‚¬í•­ì´ ìˆìœ¼ì‹œë©´ ì´ìŠˆë¥¼ ì—´ì–´ì£¼ì„¸ìš”!

---

**âš ï¸ ì£¼ì˜**: ì´ í”„ë¡œì íŠ¸ëŠ” êµìœ¡ ëª©ì ìœ¼ë¡œ ê°œë°œë˜ì—ˆìŠµë‹ˆë‹¤. ì‹¤ì œ ìê¸ˆì„ ì‚¬ìš©í•˜ê¸° ì „ì— ì¶©ë¶„í•œ ê²€í† ì™€ ê°ì‚¬ê°€ í•„ìš”í•©ë‹ˆë‹¤.

